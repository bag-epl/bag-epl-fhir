Extension: ChEplLimitation
Id: ch-epl-limitation
Title: "CH EPL Limitation"
Description: "Profile of the resource for representing a limitation."
* . ^short = "CH EPL Limitation"
* ^url = "http://fhir.ch/ig/ch-epl/StructureDefinition/ch-epl-limitation"
* ^status = #draft
* ^experimental = false
* ^date = "2024-02-20"
* ^publisher = "FOPH"
* ^context[0].type = #element
* ^context[0].expression = "RegulatedAuthorization"
* ^context[1].type = #element
* ^context[1].expression = "RegulatedAuthorization.indication"

* extension contains
    limitationStatus 1..1 and
    limitationStatusDate 1..1 and 
    limitationStartDate 0..1 and
    limitationEndDate 1..1 and
    reimbursementExpiryDate 1..1 and 
    dateOfFirstLimitation 0..1
   
* extension[limitationStatus] only Extension
* extension[limitationStatus] ^definition = "Extension for representing the limitation status"
* extension[limitationStatus].value[x] only CodeableConcept
* extension[limitationStatus].value[x] from ChEplLimitationStatusVS (required)
* extension[limitationStatus].value[x].coding 1..
* extension[limitationStatus].value[x].coding ^slicing.discriminator[+].type = #value
* extension[limitationStatus].value[x].coding ^slicing.discriminator[=].path = "system"
* extension[limitationStatus].value[x].coding ^slicing.rules = #open
* extension[limitationStatus].value[x].coding contains SMC 0..1
* extension[limitationStatus].value[x].coding[SMC].system 1..
* extension[limitationStatus].value[x].coding[SMC].system = $ePL-LimitationStatusCS
* extension[limitationStatus].value[x].coding[SMC].code 1..

* extension[limitationStatusDate].value[x] only date
* extension[limitationStatusDate] ^definition = "Extension for representing the date the limitation status was assigned used by FOPH"

* extension[limitationStartDate].value[x] only date
* extension[limitationStartDate] ^definition = "Extension for representing the date the limitation started by FOPH"

* extension[limitationEndDate].value[x] only date
* extension[limitationEndDate] ^definition = "Extension for representing the date the limitation ended by FOPH"

* extension[reimbursementExpiryDate].value[x] only date
* extension[reimbursementExpiryDate] ^definition = "Extension for representing the expirydate of reimbursement by FOPH"

* extension[dateOfFirstLimitation].value[x] only date
* extension[dateOfFirstLimitation] ^definition = "Extension for representing the date when a limitation was asigned for the first time by FOPH"